<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>AVClipManager</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="stylesheet" type="text/css" href="../css/VisDoc.css" /><script src="../js/jquery.js" type="text/javascript">//</script><script src="../js/common.js" type="text/javascript">//</script><script src="../js/doc.js" type="text/javascript">//</script></head><body id="page_com_smartfoxserver_redbox_AVClipManager"><script type="text/javascript">VisDoc.initBody();</script><div id="PageTop"><!----></div><div class="VisDoc"><div class="content"><div class="docNav"><ul><li><div id="twistyTOC_show" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited activeWhenNotFramed"><a href="#"><span class="icon">+</span>Show TOC</a></div><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("twistyTOC_show");</script><div id="twistyTOC_hide" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited activeWhenFramed"><a href="#"><span class="icon">&times;</span>Hide TOC</a></div><span id="twistyTOC_toggle" class="twistyContent"><!----></span><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("twistyTOC_hide");</script></li></ul><ul class="accessKeyLinks"><li><a href="#PageTop" accesskey="t"><span class="accessKey">T</span>op</a></li><li><a href="#Summary" accesskey="s"><span class="accessKey">S</span>ummary</a></li><li><a href="#Constructor" accesskey="c"><span class="accessKey">C</span>onstructors</a></li><li><a href="#Instanceproperties" accesskey="l">Instance <span class="accessKey">p</span>roperties</a></li><li><a href="#Instancemethods" accesskey="m">Instance <span class="accessKey">m</span>ethods</a></li><li><a href="#Eventhandlers" accesskey="e"><span class="accessKey">E</span>vent handlers</a></li></ul><br class="clear" /></div><h1>AVClipManager</h1><div class="classProperties"><table cellspacing="0"><tr><th align="left">Kind of class:</th><td>class</td></tr><tr><th align="left">Inherits from:</th><td>EventDispatcher</td></tr><tr><th class="classDetails" align="left">Version:</th><td class="classDetails">1.0.0</td></tr><tr><th class="classDetails" align="left">Author:</th><td class="classDetails">The gotoAndPlay() Team<br />			<a href="http://www.smartfoxserver.com">http://www.smartfoxserver.com</a><br />			<a href="http://www.gotoandplay.it">http://www.gotoandplay.it</a></td></tr><tr><th class="classDetails" align="left">Classpath:</th><td class="classDetails">com.smartfoxserver.redbox.AVClipManager</td></tr><tr><th class="classDetails" align="left">File last modified:</th><td class="classDetails">Monday, 07 July 2008, 10:21:32</td></tr></table></div><div class="classDescription"><span class="descriptionSummary">SmartFoxServer's RedBox Audio/Video Clip Manager.</span><br />This class is responsible for audio/video clip recording & playback through the connection to the Red5 server.<br />The AVClipManager handles the list of available a/v clips, their custom additional properties and the streaming to/from the Red5 server.<br /><br /><b>NOTE</b>: in the provided examples, <code>avClipMan</code> always indicates an AVClipManager instance.<div class="classFields"><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Usage:</span><div class="item"><ul><li> The <b>AVClipManager</b> class allows the playback of audio/video clips hosted on the server (for example movie trailers, video interviews, lessons, video messages, etc.) and the recording of live broadcasts.<br />			Each clip can be described by a number of custom parameters that are saved on the file system together with the clip's flv file.<br />			<br />			<i>Videoclip player</i><br />			In this kind of application, the list of available clips is retrieved and displayed on the stage. When the user clicks on an item, a video player handles the incoming stream. The following workflow is suggested.<ol><li>The current user logs in and joins a room (usually a lobby); the list of available clips is requested using the <a href="com_smartfoxserver_redbox_AVClipManager.html#getClipList">getClipList</a> method.<br />				Calling this method also enables the reception of the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipAdded">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipAdded</a>, <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipDeleted">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipDeleted</a> and <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipUpdated">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipUpdated</a> events which notify that a new clip has been added or removed from the clips list, or that the properties of a clip have been updated.</li><li>The clips list is received by means of the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipList">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipList</a> event: the clips, together with their properties (for example title, author, description, etc.) are listed in a specific component on the stage (for example a datagrid).</li><li>When the user selects a clip, a NetStream object is requested to the AVClipManager by means of the <a href="com_smartfoxserver_redbox_AVClipManager.html#getStream">getStream</a> method and the playback is started using the clip's id with the NetStream's <i>play</i> method (a simple Video object or a more complex UI component with advanced seek/volume controls can be used to display the streaming clip).</li></ol><hr /><i>Video message recorder</i><br />			In this kind of application, a video message is recorded, previewed and finally submitted together with a number of additional properties. The following workflow is suggested.<ol><li>The current user logs in and joins a room (usually a lobby); the user interface displays the required controls to start/stop recording, preview a recorded clip, submit it or cancel the process; also, a form to collect the clip properties (for example the message title) is available.</i><li>The user clicks on the "start recording" button: the <a href="com_smartfoxserver_redbox_AVClipManager.html#startClipRecording">startClipRecording</a> method is invoked and a unique clip id is requested to the server-side extension.</li><li>When the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipRecordingStarted">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipRecordingStarted</a> event is fired in response, the camera/microphone output is attached to an outgoing stream which is recorded on the file system by the Red5 server. A Video object is added to the stage to display the user's own camera output.</i><li>The user clicks on the "stop recording" button: the <a href="com_smartfoxserver_redbox_AVClipManager.html#stopClipRecording">stopClipRecording</a> method is called and the outgoing stream is closed. The flv file on the server is now just temporary: if the user disconnects from SmartFoxServer or the <a href="com_smartfoxserver_redbox_AVClipManager.html#cancelClipRecording">cancelClipRecording</a> method is called, the file is removed from the file system.</li><li>The user clicks on the "preview clip" button: the <a href="com_smartfoxserver_redbox_AVClipManager.html#previewRecordedClip">previewRecordedClip</a> method is called and a playing NetStream object is returned. The stream is attached to a Video object on the stage to display it.</li><li>The user clicks on the "submit clip" button: the collected clip properties are passed to the <a href="com_smartfoxserver_redbox_AVClipManager.html#submitRecordedClip">submitRecordedClip</a> method and saved on the server's file system together with the clip's flv file. On the server side the clip is added to the list of available clips.</li></ol> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Events broadcasted to listeners:</span><div class="item"><ul><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onAVConnectionInited">RedBoxClipEvent</a> with type: <code>onAVConnectionInited</code> <ul class="summary inheritDoc"><li>	Dispatched when the connection to Red5 server has been established.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onAVConnectionError">RedBoxClipEvent</a> with type: <code>onAVConnectionError</code> <ul class="summary inheritDoc"><li>Dispatched when the connection to Red5 server can't be established.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipList">RedBoxClipEvent</a> with type: <code>onClipList</code> <ul class="summary inheritDoc"><li>Dispatched when clips list is returned, in response to a <a href="com_smartfoxserver_redbox_AVClipManager.html#getClipList">getClipList</a> request.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipRecordingStarted">RedBoxClipEvent</a> with type: <code>onClipRecordingStarted</code> <ul class="summary inheritDoc"><li>Dispatched when the recording of an a/v clip starts, in response to a <a href="com_smartfoxserver_redbox_AVClipManager.html#startClipRecording">startClipRecording</a> request.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipAdded">RedBoxClipEvent</a> with type: <code>onClipAdded</code> <ul class="summary inheritDoc"><li>Dispatched when a new a/v clip has been submitted by one of the users in the current zone.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipSubmissionFailed">RedBoxClipEvent</a> with type: <code>onClipSubmissionFailed</code> <ul class="summary inheritDoc"><li>Dispatched when an error occurs in the RedBox server-side extension after submitting an a/v clip.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipDeleted">RedBoxClipEvent</a> with type: <code>onClipDeleted</code> <ul class="summary inheritDoc"><li>Dispatched when an a/v clip has been deleted by one of the users in the current zone.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipUpdated">RedBoxClipEvent</a> with type: <code>onClipUpdated</code> <ul class="summary inheritDoc"><li>Dispatched when the properties of an a/v clip have been updated by one of the users in the current zone.</li></ul></li></ul></div></div></div></div></div></div><div class="summary"><h2 id="Summary">Summary</h2><div class="docNav"><ul><li><div id="twistyTypeInfo_show" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited twistyRememberSetting"><a href="#"><span class="icon">&times;</span>Hide type info</a></div><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("toggleTypeInfo_on");</script><div id="twistyTypeInfo_hide" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited twistyRememberSetting"><a href="#"><span class="icon">+</span>Show type info</a></div><span id="twistyTypeInfo_toggle" class="twistyContent"><!----></span><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("toggleTypeInfo_off");</script></li><li><div id="twistySummaries_show" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited twistyRememberSetting"><a href="#"><span class="icon">&times;</span>Hide summaries</a></div><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("toggleSummaries_on");</script><div id="twistySummaries_hide" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited twistyRememberSetting"><a href="#"><span class="icon">+</span>Show summaries</a></div><span id="twistySummaries_toggle" class="twistyContent"><!----></span><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("toggleSummaries_off");</script></li><li><div id="twistySort_show" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited twistyRememberSetting"><a href="#"><span class="icon">&times;</span>Sort by source order</a></div><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("toggleSort_on");</script><div id="twistySort_hide" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited twistyRememberSetting"><a href="#"><span class="icon">+</span>Sort alphabetically</a></div><span id="twistySort_toggle" class="twistyContent"><!----></span><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("toggleSort_off");</script></li></ul><br class="clear" /></div><div class="memberList"><div class="memberSummaryPart"><span class="title">Constructor</span><ul class="sortable" id="sortul1"><li class="sortli listnum1"><a href="#AVClipManager">AVClipManager</a><span class="typeInfo"> (red5Ip:String, debug:Boolean)</span><ul class="summary"><li>	AVClipManager contructor.</li></ul></li></ul></div><div class="memberSummaryPart"><span class="title">Instance properties</span><ul class="sortable" id="sortul2"><li class="sortli listnum1"><a href="#isConnected">isConnected</a><span class="typeInfo">  : Boolean</span><ul class="summary"><li>The status of the connection to the Red5 server.</li></ul></li></ul></div><div class="memberSummaryPart"><span class="title">Instance methods</span><ul class="sortable" id="sortul3"><li class="sortli listnum1"><a href="#initAVConnection">initAVConnection</a><span class="typeInfo">  : Void</span><ul class="summary"><li>	Initialize the audio/video connection.</li></ul></li><li class="sortli listnum2"><a href="#destroy">destroy</a><span class="typeInfo">  : Void</span><ul class="summary"><li>	Destroy the AVClipManager instance.</li></ul></li><li class="sortli listnum3"><a href="#getClipList">getClipList</a><span class="typeInfo">  : Void</span><ul class="summary"><li>	Retrieve the list of available a/v clips for the current zone.</li></ul></li><li class="sortli listnum4"><a href="#getClip">getClip</a><span class="typeInfo"> (clipId:String) : <a class="className" href="com_smartfoxserver_redbox_data_Clip.html">Clip</a></span><ul class="summary"><li>	Retrieve a com.smartfoxserver.redbox.data.Clip object instance from the clips list.</li></ul></li><li class="sortli listnum5"><a href="#getStream">getStream</a><span class="typeInfo">  : NetStream</span><ul class="summary"><li>	Get a NetStream object which makes use of the AVClipManager connection to Red5.</li></ul></li><li class="sortli listnum6"><a href="#startClipRecording">startClipRecording</a><span class="typeInfo"> (enableCamera:Boolean, enableMicrophone:Boolean) : Void</span><ul class="summary"><li>	Start recording a new a/v clip.</li></ul></li><li class="sortli listnum7"><a href="#stopClipRecording">stopClipRecording</a><span class="typeInfo">  : Void</span><ul class="summary"><li>	Stop current recording of an a/v clip.</li></ul></li><li class="sortli listnum8"><a href="#cancelClipRecording">cancelClipRecording</a><span class="typeInfo">  : Void</span><ul class="summary"><li>	Cancel current recording of an a/v clip.</li></ul></li><li class="sortli listnum9"><a href="#previewRecordedClip">previewRecordedClip</a><span class="typeInfo">  : NetStream</span><ul class="summary"><li>	Preview the recorded a/v clip.</li></ul></li><li class="sortli listnum10"><a href="#submitRecordedClip">submitRecordedClip</a><span class="typeInfo"> (properties:Object) : Void</span><ul class="summary"><li>	Submit the recorded a/v clip to the server.</li></ul></li><li class="sortli listnum11"><a href="#getRecordedClipId">getRecordedClipId</a><span class="typeInfo">  : String</span><ul class="summary"><li>	Get the id of the currently recorded clip.</li></ul></li><li class="sortli listnum12"><a href="#submitUploadedClip">submitUploadedClip</a><span class="typeInfo"> (clipId:String, properties:Object) : Void</span><ul class="summary"><li>	Submit a previously uploaded a/v clip to the server.</li></ul></li><li class="sortli listnum13"><a href="#deleteClip">deleteClip</a><span class="typeInfo"> (clipId:String) : Void</span><ul class="summary"><li>	Remove a clip from the Red5 streams folder.</li></ul></li><li class="sortli listnum14"><a href="#updateClipProperties">updateClipProperties</a><span class="typeInfo"> (clipId:String, properties:Object) : Void</span><ul class="summary"><li>	Update the clip properties.</li></ul></li><li class="sortli listnum15"><a href="#addEventListener">addEventListener</a><span class="typeInfo"> (type:String, listener:Function) : Void</span><ul class="summary"><li>	Register a listener function in order to receive notification of a RedBox event.</li></ul></li><li class="sortli listnum16"><a href="#removeEventListener">removeEventListener</a><span class="typeInfo"> (type:String, listener:Function) : Void</span><ul class="summary"><li>	Remove a listener from the event dispatcher, to stop receiving notification of an event.</li></ul></li></ul></div></div></div><div class="memberSection"><h2 id="Constructor">Constructor</h2><div class="member" id="AVClipManager"><h3>AVClipManager</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>AVClipManager</b> (

</div><div class="code">red5Ip:String,
debug:Boolean)</div><br class="clear" /></div></div><div class="description"> 	AVClipManager contructor.<br />The RedBox classes make an extensive use of the SmartFoxBits Connector's s event handler in order to communicate with SmartFoxServer.<br />To achieve this you should place the Connector on a frame before you use RedBox classes on the following frame(s) or to make sure that the Connector is on the lowest layer of the timeline, and set the "Load order" option in the Flash Publish Settings to "Bottom up". </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">red5Ip<span class="itemSeparator">:</span></div><div>the Red5 server IP address.</div></div><div class="item"><div class="floatbox code colorizedCode">debug <span class="itemSeparator">:</span></div><div>turn on the debug messages (optional, default is <code>false</code>).</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Throws:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_ConnectorNotFoundException.html">com.smartfoxserver.redbox.exceptions.ConnectorNotFoundException</a> if the SmartFoxBits Connector is not placed on the Stage. </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_MyUserPropsNotSetException.html">com.smartfoxserver.redbox.exceptions.MyUserPropsNotSetException</a> if the <i>SmartFoxClient.myUserId</i> or <i>SmartFoxClient.myUserName</i> properties are not set. </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_InvalidParamsException.html">com.smartfoxserver.redbox.exceptions.InvalidParamsException</a> if the <code>red5Ip</code> is not well formated IP address. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to instantiate the AVClipManager class.<br />			<pre>
<span class="codeKeyword">var</span> red5IpAddress:<span class="codeIdentifier">String</span> = <span class="codeString">"127.0.0.1"</span>

<span class="codeKeyword">var</span> avClipMan:AVClipManager = <span class="codeKeyword">new</span> AVClipManager(red5IpAddress)</pre><br />see		MyUserPropsNotSetException </li></ul></div></div></div></div></div></div><div class="memberSection"><h2 id="Instanceproperties">Instance properties</h2><div class="member" id="isConnected"><h3>isConnected</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code"><b>isConnected</b>:Boolean
</div><div class="floatbox"><span class="access">(read)</span></div><br class="clear" /></div></div><div class="description"> The status of the connection to the Red5 server.<br />If <code>true</code>, the connection to Red5 is currently available. </div></div></div><div class="memberSection"><h2 id="Instancemethods">Instance methods</h2><div class="member" id="addEventListener"><h3>addEventListener</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>addEventListener</b> (

</div><div class="code">type:String,
listener:Function) : Void</div><br class="clear" /></div></div><div class="description"> 	Register a listener function in order to receive notification of a RedBox event.<br /><br />If you no longer need an event listener, remove it by calling the removeEventListener method.<br /><br /><b>NOTE</b>: use the Delegate.create() method when registering a listener, to keep right scope in your application. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">type    <span class="itemSeparator">:</span></div><div>The event type you want to be notified of.</div></div><div class="item"><div class="floatbox code colorizedCode">listener<span class="itemSeparator">:</span></div><div>The listener function in your application that processes the event. This function must accept an RedBoxClipEvent object as its only parameter and must return nothing, as in the example above. </div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Usage:</span><div class="item"><ul><li> To register to an event:<br />		<pre>
<span class="codeKeyword">import</span> com.smartfoxserver.redbox.events.*
<span class="codeKeyword">import</span> mx.utils.Delegate

avClipMan.addEventListener(RedBoxClipEvent.onClipAdded, Delegate.create(<span class="codeIdentifier">this</span>, myListener))

<span class="codeKeyword">private</span> <span class="codeKeyword">function</span> myListener(evt:RedBoxClipEvent):<span class="codeIdentifier">Void</span>
{
    <span class="codeIdentifier">trace</span>(<span class="codeString">"Got the event!"</span>)
    <span class="codeIdentifier">trace</span>(<span class="codeString">"Event type: "</span> + evt<span class="codeIdentifier">.type</span>)
    <span class="codeIdentifier">trace</span>(<span class="codeString">"Event target: "</span> + evt<span class="codeIdentifier">.target</span>)
    <span class="codeIdentifier">trace</span>(<span class="codeString">"Additional parameters:"</span>)

    <span class="codeKeyword">for</span> (<span class="codeKeyword">var</span> i <span class="codeKeyword">in</span> evt.params)
        <span class="codeIdentifier">trace</span>(<span class="codeString">"\t"</span> + i + <span class="codeString">" -&#62; "</span> + evt.params[i])
}</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#removeEventListener">removeEventListener</a> </li><li> <a class="className" href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html">com.smartfoxserver.redbox.events.RedBoxClipEvent</a> </li></ul></div></div></div></div></div><div class="member" id="cancelClipRecording"><h3>cancelClipRecording</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>cancelClipRecording</b> (
</div><div class="code">) : Void</div><br class="clear" /></div></div><div class="description"> 	Cancel current recording of an a/v clip.<br />This method stops the current a/v clip recording (if not already stopped by means of the <a href="com_smartfoxserver_redbox_AVClipManager.html#stopClipRecording">stopClipRecording</a> method) and forces the temporary clip created on the server to be deleted immediately. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to cancel a clip recording.<br />			<pre>
avClipMan.cancelClipRecording()

<span class="codeComment">// Detach camera output from video instance on the stage</span>
video<span class="codeIdentifier">.attachVideo</span>(<span class="codeIdentifier">null</span>)</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#startClipRecording">startClipRecording</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#stopClipRecording">stopClipRecording</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#previewRecordedClip">previewRecordedClip</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#submitRecordedClip">submitRecordedClip</a> </li></ul></div></div></div></div></div><div class="member" id="deleteClip"><h3>deleteClip</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>deleteClip</b> (
</div><div class="code">clipId:String) : Void</div><br class="clear" /></div></div><div class="description"> 	Remove a clip from the Red5 streams folder.<br />In order to delete a clip, the user must be the its owner (see the <a href="com_smartfoxserver_redbox_data_Clip.html#username">com.smartfoxserver.redbox.data.Clip.username</a> property).<br />If the clip is deleted successfully, the AVClipManager's internal clips list is updated and the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipDeleted">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipDeleted</a> event is fired. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">clipId<span class="itemSeparator">:</span></div><div>the id of the clip to be deleted.</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Events broadcasted to listeners:</span><div class="item"><ul><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipDeleted">RedBoxClipEvent</a> with type: <code>onClipDeleted</code> <ul class="summary inheritDoc"><li>Dispatched when an a/v clip has been deleted by one of the users in the current zone.</li></ul></li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Throws:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_ClipActionNotAllowedException.html">com.smartfoxserver.redbox.exceptions.ClipActionNotAllowedException</a> if the user is not the clip's owner. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to delete a clip.<br />			<pre>
avClipMan.addEventListener(RedBoxClipEvent.onClipDeleted, Delegate.create(<span class="codeIdentifier">this</span>, onClipDeleted))

avClipMan.deleteClip(clipId)

<span class="codeKeyword">function</span> onClipDeleted(evt:RedBoxClipEvent):<span class="codeIdentifier">Void</span>
{
    <span class="codeIdentifier">trace</span>(<span class="codeString">"The clip "</span> + evt.params.clip.id + <span class="codeString">" was deleted"</span>)
}</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipDeleted">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipDeleted</a> </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_ClipActionNotAllowedException.html">com.smartfoxserver.redbox.exceptions.ClipActionNotAllowedException</a> </li></ul></div></div></div></div></div><div class="member" id="destroy"><h3>destroy</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>destroy</b> (
</div><div class="code">) : Void</div><br class="clear" /></div></div><div class="description"> 	Destroy the AVClipManager instance.<br />Calling this method causes the disconnection from Red5 and the list of available clips to be cleared.<br />This method should always be called before deleting the AVClipManager instance. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to destroy the AVClipManager instance.<br />			<pre>
avClipMan.destroy()
avClipMan = <span class="codeIdentifier">null</span></pre> </li></ul></div></div></div></div></div><div class="member" id="getClip"><h3>getClip</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>getClip</b> (
</div><div class="code">clipId:String) : <a class="className" href="com_smartfoxserver_redbox_data_Clip.html">Clip</a></div><br class="clear" /></div></div><div class="description"> 	Retrieve a <a class="className" href="com_smartfoxserver_redbox_data_Clip.html">com.smartfoxserver.redbox.data.Clip</a> object instance from the clips list. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">clipId<span class="itemSeparator">:</span></div><div>(<b>String</b>) the id of the <a class="className" href="com_smartfoxserver_redbox_data_Clip.html">com.smartfoxserver.redbox.data.Clip</a> object to be retrieved.</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Returns:</span><div class="item"><ul><li> The <a class="className" href="com_smartfoxserver_redbox_data_Clip.html">com.smartfoxserver.redbox.data.Clip</a> object. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to get a clip from the clips list.<br />			<pre>
<span class="codeKeyword">var</span> clip:Clip = avClipMan.getClip(clipId)

<span class="codeKeyword">if</span> (clip != <span class="codeIdentifier">null</span>)
{
    <span class="codeIdentifier">trace</span> (<span class="codeString">"Clip id:"</span>, clip.id)
    <span class="codeIdentifier">trace</span> (<span class="codeString">"Clip submitter:"</span>, clip.username)
    <span class="codeIdentifier">trace</span> (<span class="codeString">"Clip size:"</span>, clip<span class="codeIdentifier">.size</span> + <span class="codeString">" bytes"</span>)
    <span class="codeIdentifier">trace</span> (<span class="codeString">"Clip last modified date:"</span>, clip.lastModified)
    <span class="codeIdentifier">trace</span> (<span class="codeString">"Clip properties:"</span>)
    <span class="codeKeyword">for</span> (<span class="codeKeyword">var</span> s:<span class="codeIdentifier">String</span> <span class="codeKeyword">in</span> clip.properties)
        <span class="codeIdentifier">trace</span> (s + <span class="codeString">" --&#62; "</span> + clip.properties[s])
}</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_data_Clip.html">com.smartfoxserver.redbox.data.Clip</a> </li></ul></div></div></div></div></div><div class="member" id="getClipList"><h3>getClipList</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>getClipList</b> (
</div><div class="code">) : Void</div><br class="clear" /></div></div><div class="description"> 	Retrieve the list of available a/v clips for the current zone.<br />The clip list is requested to the RedBox server-side extension only the first time that this method is called, then only updates are notified.<br />The list is an array of <a class="className" href="com_smartfoxserver_redbox_data_Clip.html">com.smartfoxserver.redbox.data.Clip</a> objects returned by means of the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipList">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipList</a> event. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Events broadcasted to listeners:</span><div class="item"><ul><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipList">RedBoxClipEvent</a> with type: <code>onClipList</code> <ul class="summary inheritDoc"><li>Dispatched when clips list is returned, in response to a <a href="com_smartfoxserver_redbox_AVClipManager.html#getClipList">getClipList</a> request.</li></ul></li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to request the clips list to the AVClipManager instance.<br />			<pre>
avClipMan.addEventListener(RedBoxClipEvent.onClipList, Delegate.create(<span class="codeIdentifier">this</span>, onClipList))

avClipMan.getClipList()

<span class="codeKeyword">function</span> onClipList(evt:RedBoxClipEvent):<span class="codeIdentifier">Void</span>
{
    <span class="codeKeyword">for</span>(<span class="codeKeyword">var</span> i <span class="codeKeyword">in</span> evt.params.clipList)
{
    <span class="codeKeyword">var</span> clip:Clip = evt.params.clipList[i]
        <span class="codeIdentifier">trace</span> (<span class="codeString">"Clip id:"</span>, clip.id)
        <span class="codeIdentifier">trace</span> (<span class="codeString">"Clip submitter:"</span>, clip.username)
        <span class="codeIdentifier">trace</span> (<span class="codeString">"Clip size:"</span>, clip<span class="codeIdentifier">.size</span> + <span class="codeString">" bytes"</span>)
        <span class="codeIdentifier">trace</span> (<span class="codeString">"Clip last modified date:"</span>, clip.lastModified)
        <span class="codeIdentifier">trace</span> (<span class="codeString">"Clip properties:"</span>)
        <span class="codeKeyword">for</span> (<span class="codeKeyword">var</span> s:<span class="codeIdentifier">String</span> <span class="codeKeyword">in</span> clip.properties)
            <span class="codeIdentifier">trace</span> (s + <span class="codeString">" --&#62; "</span> + clip.properties[s])
    }
}</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_data_Clip.html">com.smartfoxserver.redbox.data.Clip</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipList">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipList</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipAdded">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipAdded</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipDeleted">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipDeleted</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipUpdated">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipUpdated</a> </li></ul></div></div></div></div></div><div class="member" id="getRecordedClipId"><h3>getRecordedClipId</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>getRecordedClipId</b> (
</div><div class="code">) : String</div><br class="clear" /></div></div><div class="description"> 	Get the id of the currently recorded clip.<br />This id is <code>null</code> until the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipRecordingStarted">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipRecordingStarted</a> event is received, and it's set back to <code>null</code> when the <a href="com_smartfoxserver_redbox_AVClipManager.html#submitRecordedClip">submitRecordedClip</a> or <a href="com_smartfoxserver_redbox_AVClipManager.html#cancelClipRecording">cancelClipRecording</a> methods are called.<br />The recorded clip id is usually not necessary, unless a more advanced control over the clip preview is required with respect to what the <a href="com_smartfoxserver_redbox_AVClipManager.html#previewRecordedClip">previewRecordedClip</a> method offers.<br />In this case the <a href="com_smartfoxserver_redbox_AVClipManager.html#getStream">getStream</a> method can be used and the clip stream played by means of its id. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Returns:</span><div class="item"><ul><li> The id of the recorded clip. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to use the id to preview a recorded a/v clip.<br />			<pre>
<span class="codeKeyword">var</span> recordedClipId:<span class="codeIdentifier">String</span> = avClipman.getRecordedClipId()
<span class="codeKeyword">var</span> stream:<span class="codeIdentifier">NetStream</span> = avClipMan.getStream()
stream.onPlayStatus = Delegate.create(<span class="codeIdentifier">this</span>, onPlayStatus)

video<span class="codeIdentifier">.attachVideo</span>(stream) <span class="codeComment">// Attach stream to a Video object instance on the stage to preview the recorded clip</span>
stream<span class="codeIdentifier">.play</span>(recordedClipId, <span class="codeNumber">0</span>)

<span class="codeKeyword">function</span> onPlayStatus(info:<span class="codeIdentifier">Object</span>):<span class="codeIdentifier">Void</span>
{
    <span class="codeComment">// Reset video upon completion</span>
    <span class="codeKeyword">if</span>(info.code == <span class="codeString">"NetStream.Play.Complete"</span>)
        video<span class="codeIdentifier">.attachVideo</span>(<span class="codeIdentifier">null</span>)
}</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#previewRecordedClip">previewRecordedClip</a> </li></ul></div></div></div></div></div><div class="member" id="getStream"><h3>getStream</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>getStream</b> (
</div><div class="code">) : NetStream</div><br class="clear" /></div></div><div class="description"> 	Get a NetStream object which makes use of the AVClipManager connection to Red5.<br />This method can be used to retrieve a valid NetStream object and play an a/v clip from the clips list by means of its id. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Returns:</span><div class="item"><ul><li> A NetStream object. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Throws:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_NoAVConnectionException.html">com.smartfoxserver.redbox.exceptions.NoAVConnectionException</a> if the connection to Red5 is not available. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to get a stream and play a clip; the "onMetaData" handler is also set to trace the clip's flv metadata.<br />			<pre>
<span class="codeKeyword">var</span> stream:<span class="codeIdentifier">NetStream</span> = avClipMan.getStream()
stream.onMetaData = Delegate.create(<span class="codeIdentifier">this</span>, onMetaData)

video<span class="codeIdentifier">.attachVideo</span>(stream) <span class="codeComment">// Attach stream to a Video object instance on the stage</span>
stream<span class="codeIdentifier">.play</span>(clipId, <span class="codeNumber">0</span>)

<span class="codeKeyword">function</span> onMetaData(info:<span class="codeIdentifier">Object</span>):<span class="codeIdentifier">Void</span>
{
    <span class="codeIdentifier">trace</span> (<span class="codeString">"Duration: "</span> + info<span class="codeIdentifier">.duration</span>)
    <span class="codeIdentifier">trace</span> (<span class="codeString">"Framerate: "</span> + info.framerate)
    <span class="codeIdentifier">trace</span> (<span class="codeString">"Width: "</span> + info<span class="codeIdentifier">.width</span>)
    <span class="codeIdentifier">trace</span> (<span class="codeString">"Height: "</span> + info<span class="codeIdentifier">.height</span>)
}</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_NoAVConnectionException.html">com.smartfoxserver.redbox.exceptions.NoAVConnectionException</a> </li><li> <span class="doesNotExist"> NetStream</span> </li></ul></div></div></div></div></div><div class="member" id="initAVConnection"><h3>initAVConnection</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>initAVConnection</b> (
</div><div class="code">) : Void</div><br class="clear" /></div></div><div class="description"> 	Initialize the audio/video connection.<br />Calling this method causes the connection to Red5 to be established and the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onAVConnectionInited">com.smartfoxserver.redbox.events.RedBoxClipEvent.onAVConnectionInited</a> event to be fired in response.<br />If the connection can't be established, the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onAVConnectionError">com.smartfoxserver.redbox.events.RedBoxClipEvent.onAVConnectionError</a> event is fired in response.<br /><b>NOTE</b>: this method is called automatically when the AVClipManager is instantiated. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Throws:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_InvalidParamsException.html">com.smartfoxserver.redbox.exceptions.InvalidParamsException</a> if the <code>red5IpAddress</code> is not well formated IP address. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Events broadcasted to listeners:</span><div class="item"><ul><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onAVConnectionInited">RedBoxClipEvent</a> with type: <code>onAVConnectionInited</code> <ul class="summary inheritDoc"><li>	Dispatched when the connection to Red5 server has been established.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onAVConnectionError">RedBoxClipEvent</a> with type: <code>onAVConnectionError</code> <ul class="summary inheritDoc"><li>Dispatched when the connection to Red5 server can't be established.</li></ul></li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to initialize the Red5 connection for the AVClipManager instance.<br />			<pre>
avClipMan.initAVConnection()</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#isConnected">isConnected</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onAVConnectionInited">com.smartfoxserver.redbox.events.RedBoxClipEvent.onAVConnectionInited</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onAVConnectionError">com.smartfoxserver.redbox.events.RedBoxClipEvent.onAVConnectionError</a> </li></ul></div></div></div></div></div><div class="member" id="previewRecordedClip"><h3>previewRecordedClip</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>previewRecordedClip</b> (
</div><div class="code">) : NetStream</div><br class="clear" /></div></div><div class="description"> 	Preview the recorded a/v clip.<br />This method stops the current a/v clip recording (if not already stopped by means of the <a href="com_smartfoxserver_redbox_AVClipManager.html#stopClipRecording">stopClipRecording</a> method) and plays it back for preview purposes.<br />The returned NetStream object is already playing and clip events can't be catched. For a more advanced control over the clip preview, check the <a href="com_smartfoxserver_redbox_AVClipManager.html#getRecordedClipId">getRecordedClipId</a> method. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Returns:</span><div class="item"><ul><li> A NetStream object already playing the previously recorded clip. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Throws:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_NoAVConnectionException.html">com.smartfoxserver.redbox.exceptions.NoAVConnectionException</a> if the connection to Red5 is not available. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to preview a recorded clip.<br />			<pre>
<span class="codeKeyword">var</span> stream:<span class="codeIdentifier">NetStream</span> = avClipMan.previewRecordedClip()

<span class="codeComment">// Attach stream to a Video object instance on the stage to display the preview</span>
video<span class="codeIdentifier">.attachVideo</span>(stream)</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#startClipRecording">startClipRecording</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#stopClipRecording">stopClipRecording</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#cancelClipRecording">cancelClipRecording</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#submitRecordedClip">submitRecordedClip</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#getRecordedClipId">getRecordedClipId</a> </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_NoAVConnectionException.html">com.smartfoxserver.redbox.exceptions.NoAVConnectionException</a> </li></ul></div></div></div></div></div><div class="member" id="removeEventListener"><h3>removeEventListener</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>removeEventListener</b> (

</div><div class="code">type:String,
listener:Function) : Void</div><br class="clear" /></div></div><div class="description"> 	Remove a listener from the event dispatcher, to stop receiving notification of an event.  </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">type    <span class="itemSeparator">:</span></div><div>The event type you registered your listener to.</div></div><div class="item"><div class="floatbox code colorizedCode">listener<span class="itemSeparator">:</span></div><div>The listener function to remove.</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Usage:</span><div class="item"><ul><li> To remove a listener:<br />		<pre>
avClipMan.removeEventListener(RedBoxClipEvent.onClipAdded, myListener)</pre>		<b>NOTE</b>: the Delegate.create() is not required to remove a listener. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#addEventListener">addEventListener</a> </li><li> <a class="className" href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html">com.smartfoxserver.redbox.events.RedBoxClipEvent</a> </li></ul></div></div></div></div></div><div class="member" id="startClipRecording"><h3>startClipRecording</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>startClipRecording</b> (

</div><div class="code">enableCamera:Boolean,
enableMicrophone:Boolean) : Void</div><br class="clear" /></div></div><div class="description"> 	Start recording a new a/v clip.<br />When this method is called, a unique clip id is requested to the RedBox server-side extension (unless a previous one is already available).<br />On extension response, the recording is started and the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipRecordingStarted">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipRecordingStarted</a> event is fired.<br />Audio and video recording mode/quality should be set before calling this method. In order to alter these settings, please refer to the Microphone and Camera classes documentation. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">enableCamera    <span class="itemSeparator">:</span></div><div>enable video recording; default value is <code>true</code>.</div></div><div class="item"><div class="floatbox code colorizedCode">enableMicrophone<span class="itemSeparator">:</span></div><div>enable audio recording; default value is <code>true</code>.</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Events broadcasted to listeners:</span><div class="item"><ul><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipRecordingStarted">RedBoxClipEvent</a> with type: <code>onClipRecordingStarted</code> <ul class="summary inheritDoc"><li>Dispatched when the recording of an a/v clip starts, in response to a <a href="com_smartfoxserver_redbox_AVClipManager.html#startClipRecording">startClipRecording</a> request.</li></ul></li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Throws:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_NoAVConnectionException.html">com.smartfoxserver.redbox.exceptions.NoAVConnectionException</a> if the connection to Red5 is not available. </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_InvalidParamsException.html">com.smartfoxserver.redbox.exceptions.InvalidParamsException</a> if both <i>enableCamera</i> and <i>enableMicrophone</i> parameters are set to <code>false</code>. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to start recording a new clip; camera mode is set before starting the recording.<br />			<pre>
avClipMan.addEventListener(RedBoxClipEvent.onClipRecordingStarted, Delegate.create(<span class="codeIdentifier">this</span>, onClipRecordingStarted))

<span class="codeKeyword">try</span>
{
    <span class="codeKeyword">var</span> camera:<span class="codeIdentifier">Camera</span> = <span class="codeIdentifier">Camera</span><span class="codeIdentifier">.get</span>()
    camera<span class="codeIdentifier">.setMode</span>(<span class="codeNumber">320</span>, <span class="codeNumber">240</span>, <span class="codeNumber">15</span>)

    avClipMan.startClipRecording(<span class="codeIdentifier">true</span>, <span class="codeIdentifier">true</span>)
}
<span class="codeKeyword">catch</span> (err:NoAVConnectionException)
{
    <span class="codeIdentifier">trace</span> (err<span class="codeIdentifier">.message</span>)
}

<span class="codeKeyword">function</span> onClipRecordingStarted(evt:RedBoxClipEvent):<span class="codeIdentifier">Void</span>
{
    <span class="codeComment">// Attach camera output to video instance on stage to see what I'm recording</span>
    video<span class="codeIdentifier">.attachVideo</span>(<span class="codeIdentifier">Camera</span><span class="codeIdentifier">.get</span>())
}</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#stopClipRecording">stopClipRecording</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#cancelClipRecording">cancelClipRecording</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#previewRecordedClip">previewRecordedClip</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#submitRecordedClip">submitRecordedClip</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipRecordingStarted">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipRecordingStarted</a> </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_NoAVConnectionException.html">com.smartfoxserver.redbox.exceptions.NoAVConnectionException</a> </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_InvalidParamsException.html">com.smartfoxserver.redbox.exceptions.InvalidParamsException</a> </li><li> <span class="doesNotExist"> Camera</span> </li><li> <span class="doesNotExist"> Microphone</span> </li></ul></div></div></div></div></div><div class="member" id="stopClipRecording"><h3>stopClipRecording</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>stopClipRecording</b> (
</div><div class="code">) : Void</div><br class="clear" /></div></div><div class="description"> 	Stop current recording of an a/v clip.<br />This method stops the current a/v clip recording started with the <a href="com_smartfoxserver_redbox_AVClipManager.html#startClipRecording">startClipRecording</a> method.<br />When a recording is stopped, the resulting clip is still temporary and must be saved by calling the <a href="com_smartfoxserver_redbox_AVClipManager.html#submitRecordedClip">submitRecordedClip</a> method.<br />If a clip is not submitted, the temporary file on the server is deleted when the <a href="com_smartfoxserver_redbox_AVClipManager.html#cancelClipRecording">cancelClipRecording</a> method is called or when the user disconnects from SmartFoxServer. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to stop clip recording.<br />			<pre>
avClipMan.stopClipRecording()

<span class="codeComment">// Detach camera output from video instance on the stage</span>
video.attachCideo(<span class="codeIdentifier">null</span>)</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#startClipRecording">startClipRecording</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#cancelClipRecording">cancelClipRecording</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#previewRecordedClip">previewRecordedClip</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#submitRecordedClip">submitRecordedClip</a> </li></ul></div></div></div></div></div><div class="member" id="submitRecordedClip"><h3>submitRecordedClip</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>submitRecordedClip</b> (
</div><div class="code">properties:Object) : Void</div><br class="clear" /></div></div><div class="description"> 	Submit the recorded a/v clip to the server.<br />This method stops the current a/v clip recording (if not already stopped by means of the <a href="com_smartfoxserver_redbox_AVClipManager.html#stopClipRecording">stopClipRecording</a> method) and makes the RedBox server-side extension save the clip properties and add it to the clips list.<br />If the submission is successful, the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipAdded">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipAdded</a> event is fired, otherwise the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipSubmissionFailed">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipSubmissionFailed</a> event is fired. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">properties<span class="itemSeparator">:</span></div><div>an object containing the clip properties (see the <a href="com_smartfoxserver_redbox_data_Clip.html#properties">com.smartfoxserver.redbox.data.Clip.properties</a> attribute) to be saved. Only properties of type <code>string</code>, <code>number</code> and <code>boolean</code> are accepted.</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Events broadcasted to listeners:</span><div class="item"><ul><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipAdded">RedBoxClipEvent</a> with type: <code>onClipAdded</code> <ul class="summary inheritDoc"><li>Dispatched when a new a/v clip has been submitted by one of the users in the current zone.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipSubmissionFailed">RedBoxClipEvent</a> with type: <code>onClipSubmissionFailed</code> <ul class="summary inheritDoc"><li>Dispatched when an error occurs in the RedBox server-side extension after submitting an a/v clip.</li></ul></li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to submit a recorded clip.<br />			<pre>
avClipMan.addEventListener(RedBoxClipEvent.onClipAdded, Delegate.create(<span class="codeIdentifier">this</span>, onClipAdded))

<span class="codeKeyword">var</span> clipProperties:<span class="codeIdentifier">Object</span> = {}
clipProperties.title = <span class="codeString">"My first video message"</span>
clipProperties.author = <span class="codeString">"jack"</span>

avClipMan.submitRecordedClip(clipProperties)

<span class="codeKeyword">function</span> onClipAdded(evt:RedBoxClipEvent):<span class="codeIdentifier">Void</span>
{
    <span class="codeIdentifier">trace</span>(<span class="codeString">"A new clip was added"</span>)
    <span class="codeKeyword">var</span> clip:Clip = evt.params.clip

    <span class="codeComment">// Update the clip list</span>
    ...
}</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#startClipRecording">startClipRecording</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#stopClipRecording">stopClipRecording</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#cancelClipRecording">cancelClipRecording</a> </li><li> <a href="com_smartfoxserver_redbox_AVClipManager.html#previewRecordedClip">previewRecordedClip</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipAdded">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipAdded</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipSubmissionFailed">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipSubmissionFailed</a> </li><li> <a href="com_smartfoxserver_redbox_data_Clip.html#properties">com.smartfoxserver.redbox.data.Clip.properties</a> </li></ul></div></div></div></div></div><div class="member" id="submitUploadedClip"><h3>submitUploadedClip</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>submitUploadedClip</b> (

</div><div class="code">clipId:String,
properties:Object) : Void</div><br class="clear" /></div></div><div class="description"> 	Submit a previously uploaded a/v clip to the server.<br />This method should be used when a new clip has been uploaded to the Red5 streams folder directly, for example via FTP (instead of being recorded using the <a href="com_smartfoxserver_redbox_AVClipManager.html#startClipRecording">startClipRecording</a> method).<br />By submitting the clip, the RedBox server-side extension saves the passed properties and causes the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipAdded">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipAdded</a> event to be triggered to notify the clips list update to all users.<br />If the submission fails, the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipSubmissionFailed">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipSubmissionFailed</a> event is fired.<br /><b>NOTE</b>: the file extension of the uploaded clip must be lowercase! </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">clipId    <span class="itemSeparator">:</span></div><div>the id of the uploaded clip. The id must match the flv file name, extension excluded; also, the clip id must begin with the zone name followed by an underscore character.</div></div><div class="item"><div class="floatbox code colorizedCode">properties<span class="itemSeparator">:</span></div><div>an object containing the clip properties (see the <a href="com_smartfoxserver_redbox_data_Clip.html#properties">com.smartfoxserver.redbox.data.Clip.properties</a> attribute) to be saved. Only properties of type <code>string</code>, <code>number</code> and <code>boolean</code> are accepted.</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Events broadcasted to listeners:</span><div class="item"><ul><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipAdded">RedBoxClipEvent</a> with type: <code>onClipAdded</code> <ul class="summary inheritDoc"><li>Dispatched when a new a/v clip has been submitted by one of the users in the current zone.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipSubmissionFailed">RedBoxClipEvent</a> with type: <code>onClipSubmissionFailed</code> <ul class="summary inheritDoc"><li>Dispatched when an error occurs in the RedBox server-side extension after submitting an a/v clip.</li></ul></li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to submit "SmartVideoClipPlayer_TheDarkKnight.flv" videoclip, previously uploaded to the Red5 streams folder.<br />			<pre>
avClipMan.addEventListener(RedBoxClipEvent.onClipAdded, Delegate.create(<span class="codeIdentifier">this</span>, onClipAdded))

<span class="codeKeyword">var</span> clipProperties:<span class="codeIdentifier">Object</span> = {}
clipProperties.title = <span class="codeString">"The Dark Knight"</span>
clipProperties.author = <span class="codeString">"Warner Bros."</span>

avClipMan.submitUploadedClip(<span class="codeString">"SmartVideoClipPlayer_TheDarkKnight"</span>, clipProperties)

<span class="codeKeyword">function</span> onClipAdded(evt:RedBoxClipEvent):<span class="codeIdentifier">Void</span>
{
    <span class="codeIdentifier">trace</span>(<span class="codeString">"A new movie trailer was added!"</span>)
    <span class="codeKeyword">var</span> clip:Clip = evt.params.clip

    <span class="codeComment">// Update the clip list</span>
    ...
}</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipAdded">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipAdded</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipSubmissionFailed">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipSubmissionFailed</a> </li><li> <a href="com_smartfoxserver_redbox_data_Clip.html#properties">com.smartfoxserver.redbox.data.Clip.properties</a> </li></ul></div></div></div></div></div><div class="member" id="updateClipProperties"><h3>updateClipProperties</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>updateClipProperties</b> (

</div><div class="code">clipId:String,
properties:Object) : Void</div><br class="clear" /></div></div><div class="description"> 	Update the clip properties.<br />In order to update the clip properties, the user must be the clip's owner (see the <a href="com_smartfoxserver_redbox_data_Clip.html#username">com.smartfoxserver.redbox.data.Clip.username</a> property).<br />If the clip properties are updated successfully, the AVClipManager's internal clips list is updated and the <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipUpdated">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipUpdated</a> event is fired.<br /><b>NOTE</b>: it's not possible to update a subset of properties, leaving the remaining ones unaltered: when this method is called, the whole clip's properties file is overwritten. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">clipId    <span class="itemSeparator">:</span></div><div>the id of the clip to update.</div></div><div class="item"><div class="floatbox code colorizedCode">properties<span class="itemSeparator">:</span></div><div>an object containing the clip properties (see the <a href="com_smartfoxserver_redbox_data_Clip.html#properties">com.smartfoxserver.redbox.data.Clip.properties</a> attribute) to be saved. Only properties of type <code>string</code>, <code>number</code> and <code>boolean</code> are accepted.</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Events broadcasted to listeners:</span><div class="item"><ul><li><a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipUpdated">RedBoxClipEvent</a> with type: <code>onClipUpdated</code> <ul class="summary inheritDoc"><li>Dispatched when the properties of an a/v clip have been updated by one of the users in the current zone.</li></ul></li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Throws:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_ClipActionNotAllowedException.html">com.smartfoxserver.redbox.exceptions.ClipActionNotAllowedException</a> if the user is not the clip's owner. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to update the properties of a clip.<br />			<pre>
avClipMan.addEventListener(RedBoxClipEvent.onClipUpdated, Delegate.create(<span class="codeIdentifier">this</span>, onClipUpdated))

<span class="codeKeyword">var</span> newClipProperties:<span class="codeIdentifier">Object</span> = {}
newClipProperties.title = <span class="codeString">"Batman - The Dark Knight"</span>
newClipProperties.author = <span class="codeString">"Warner Bros."</span>

avClipMan.updateClipProperties(clipId, newClipProperties)

<span class="codeKeyword">function</span> onClipUpdated(evt:RedBoxClipEvent):<span class="codeIdentifier">Void</span>
{
    <span class="codeIdentifier">trace</span>(<span class="codeString">"Clip properties have been updated"</span>)
    <span class="codeKeyword">var</span> clip:Clip = evt.params.clip

    <span class="codeComment">// Update the clip list</span>
    ...
}</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_events_RedBoxClipEvent.html#onClipUpdated">com.smartfoxserver.redbox.events.RedBoxClipEvent.onClipUpdated</a> </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_ClipActionNotAllowedException.html">com.smartfoxserver.redbox.exceptions.ClipActionNotAllowedException</a> </li></ul></div></div></div></div></div></div><div class="footer"><ul class="docFooter"><li class="copyright">&copy; gotoAndPlay() - 2008</li></ul></div></div></div></body></html>