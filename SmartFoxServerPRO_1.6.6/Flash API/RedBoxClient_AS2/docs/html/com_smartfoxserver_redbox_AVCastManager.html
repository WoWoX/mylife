<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>AVCastManager</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="stylesheet" type="text/css" href="../css/VisDoc.css" /><script src="../js/jquery.js" type="text/javascript">//</script><script src="../js/common.js" type="text/javascript">//</script><script src="../js/doc.js" type="text/javascript">//</script></head><body id="page_com_smartfoxserver_redbox_AVCastManager"><script type="text/javascript">VisDoc.initBody();</script><div id="PageTop"><!----></div><div class="VisDoc"><div class="content"><div class="docNav"><ul><li><div id="twistyTOC_show" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited activeWhenNotFramed"><a href="#"><span class="icon">+</span>Show TOC</a></div><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("twistyTOC_show");</script><div id="twistyTOC_hide" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited activeWhenFramed"><a href="#"><span class="icon">&times;</span>Hide TOC</a></div><span id="twistyTOC_toggle" class="twistyContent"><!----></span><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("twistyTOC_hide");</script></li></ul><ul class="accessKeyLinks"><li><a href="#PageTop" accesskey="t"><span class="accessKey">T</span>op</a></li><li><a href="#Summary" accesskey="s"><span class="accessKey">S</span>ummary</a></li><li><a href="#Constructor" accesskey="c"><span class="accessKey">C</span>onstructors</a></li><li><a href="#Instanceproperties" accesskey="l">Instance <span class="accessKey">p</span>roperties</a></li><li><a href="#Instancemethods" accesskey="m">Instance <span class="accessKey">m</span>ethods</a></li><li><a href="#Eventhandlers" accesskey="e"><span class="accessKey">E</span>vent handlers</a></li></ul><br class="clear" /></div><h1>AVCastManager</h1><div class="classProperties"><table cellspacing="0"><tr><th align="left">Kind of class:</th><td>class</td></tr><tr><th align="left">Inherits from:</th><td>none</td></tr><tr><th class="classDetails" align="left">Version:</th><td class="classDetails">1.0.0</td></tr><tr><th class="classDetails" align="left">Author:</th><td class="classDetails">The gotoAndPlay() Team<br />			<a href="http://www.smartfoxserver.com">http://www.smartfoxserver.com</a><br />			<a href="http://www.gotoandplay.it">http://www.gotoandplay.it</a></td></tr><tr><th class="classDetails" align="left">Classpath:</th><td class="classDetails">com.smartfoxserver.redbox.AVCastManager</td></tr><tr><th class="classDetails" align="left">File last modified:</th><td class="classDetails">Monday, 07 July 2008, 10:21:32</td></tr></table></div><div class="classDescription"><span class="descriptionSummary">SmartFoxServer's RedBox Audio/Video Broadcast Manager.</span><br />This class is responsible for managing audio/video live casts inside the room joined by the user, making it possible to create live web events or a/v conferences.<br />The AVCastManager handles the live cast publishing/playing to/from the Red5 server.<br />Unlike the other RedBox classes, the AVCastManager works on a room basis to leverage the access control and moderation features of SmartFoxServer rooms.<br /><br /><b>NOTE</b>: in the provided examples, <code>avCastMan</code> always indicates an AVCastManager instance.<div class="classFields"><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Usage:</span><div class="item"><ul><li> The most common usages for the <b>AVCastManager</b> class are video conference applications and live webcast applications (for example live online seminars).<br />			<br />			<i>Video conference</i><br />			In this kind of application, each user publishes his own live stream and subscribes the streams coming from the other users in the same room (in the SmartFoxServer meaning). The following workflow is suggested.<ol><li>The current user joins the room where the video conference takes place.</li><li>The list of currently available streams (or "live casts") is retrieved by means of the <a href="com_smartfoxserver_redbox_AVCastManager.html#getAvailableCasts">getAvailableCasts</a> method (in case the conference is already in progress).<br />				Calling this method also enables the reception of the <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastPublished">com.smartfoxserver.redbox.events.RedBoxCastEvent.onLiveCastPublished</a> and <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastUnpublished">com.smartfoxserver.redbox.events.RedBoxCastEvent.onLiveCastUnpublished</a> events which notify that another user started or stopped his own stream.</li><li>Each live cast is subscribed by means of the <a href="com_smartfoxserver_redbox_AVCastManager.html#subscribeLiveCast">subscribeLiveCast</a> method and a Video object is displayed on the stage to attach the stream to.<br />				When a live cast is published (a new user joins the conference) or stopped (a user leaves the conference), a notification is received by means of the above mentioned events: the stream is subscribed / unsubscribed and displayed on / removed from the stage.</li><li>The a/v stream for the current user is published by means of the <a href="com_smartfoxserver_redbox_AVCastManager.html#publishLiveCast">publishLiveCast</a> method and an additional Video object showing the user own camera stream is added on the stage; when the current user publishes his own stream, the other users receive the above mentioned events.</li><li>To make the current user leave the conference, the <a href="com_smartfoxserver_redbox_AVCastManager.html#unpublishLiveCast">unpublishLiveCast</a> method is called. Also changing SmartFoxServer room causes the user to leave the conference and the other users to be notified.</li></ol><hr /><i>Live webcast</i><br />			In this kind of application, a single user publishes his own live stream and all the other users in the same room subscribe it. The following workflow is suggested.<ol><li>The publisher joins the room where the live webcast takes place.</li><li>The a/v stream for the user is published by means of the <a href="com_smartfoxserver_redbox_AVCastManager.html#publishLiveCast">publishLiveCast</a> method and a Video object showing the user own camera stream is added on the stage; when the current user publishes his own stream, the other users already in the room receive the <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastPublished">com.smartfoxserver.redbox.events.RedBoxCastEvent.onLiveCastPublished</a> event and the stream can be subscribed (see step 4).</li><li>The webcast spectators join the room and retrieve the list of available streams (one item only if the publisher is already streaming, otherwise the list will be empty).</li><li>If the live webcast is already started, it can be subscribed by means of the <a href="com_smartfoxserver_redbox_AVCastManager.html#subscribeLiveCast">subscribeLiveCast</a> method; otherwise the <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastPublished">com.smartfoxserver.redbox.events.RedBoxCastEvent.onLiveCastPublished</a> event must be waited for before calling this method.</li><li>On all the subscribers clients a Video object is displayed on the stage to attach the stream to.</li></ol> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Events broadcasted to listeners:</span><div class="item"><ul><li><a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onAVConnectionInited">RedBoxCastEvent</a> with type: <code>onAVConnectionInited</code> <ul class="summary inheritDoc"><li>	Dispatched when the connection to Red5 server has been established.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onAVConnectionError">RedBoxCastEvent</a> with type: <code>onAVConnectionError</code> <ul class="summary inheritDoc"><li>Dispatched when the connection to Red5 server can't be established.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastPublished">RedBoxCastEvent</a> with type: <code>onLiveCastPublished</code> <ul class="summary inheritDoc"><li>Dispatched when a user in the current room published his own live stream.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastUnpublished">RedBoxCastEvent</a> with type: <code>onLiveCastUnpublished</code> <ul class="summary inheritDoc"><li>Dispatched when a user in the current room stops his own live stream.</li></ul></li></ul></div></div></div></div></div></div><div class="summary"><h2 id="Summary">Summary</h2><div class="docNav"><ul><li><div id="twistyTypeInfo_show" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited twistyRememberSetting"><a href="#"><span class="icon">&times;</span>Hide type info</a></div><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("toggleTypeInfo_on");</script><div id="twistyTypeInfo_hide" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited twistyRememberSetting"><a href="#"><span class="icon">+</span>Show type info</a></div><span id="twistyTypeInfo_toggle" class="twistyContent"><!----></span><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("toggleTypeInfo_off");</script></li><li><div id="twistySummaries_show" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited twistyRememberSetting"><a href="#"><span class="icon">&times;</span>Hide summaries</a></div><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("toggleSummaries_on");</script><div id="twistySummaries_hide" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited twistyRememberSetting"><a href="#"><span class="icon">+</span>Show summaries</a></div><span id="twistySummaries_toggle" class="twistyContent"><!----></span><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("toggleSummaries_off");</script></li><li><div id="twistySort_show" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited twistyRememberSetting"><a href="#"><span class="icon">&times;</span>Sort by source order</a></div><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("toggleSort_on");</script><div id="twistySort_hide" class="twistyTrigger twikiUnvisited twikiMakeVisible twistyInited twistyRememberSetting"><a href="#"><span class="icon">+</span>Sort alphabetically</a></div><span id="twistySort_toggle" class="twistyContent"><!----></span><script type="text/javascript">twiki.JQueryTwistyPlugin.initId("toggleSort_off");</script></li></ul><br class="clear" /></div><div class="memberList"><div class="memberSummaryPart"><span class="title">Constructor</span><ul class="sortable" id="sortul1"><li class="sortli listnum1"><a href="#AVCastManager">AVCastManager</a><span class="typeInfo"> (red5Ip:String, debug:Boolean)</span><ul class="summary"><li>	AVCastManager contructor.</li></ul></li></ul></div><div class="memberSummaryPart"><span class="title">Instance properties</span><ul class="sortable" id="sortul2"><li class="sortli listnum1"><a href="#isConnected">isConnected</a><span class="typeInfo">  : Boolean</span><ul class="summary"><li>The status of the connection to the Red5 server.</li></ul></li></ul></div><div class="memberSummaryPart"><span class="title">Instance methods</span><ul class="sortable" id="sortul3"><li class="sortli listnum1"><a href="#initAVConnection">initAVConnection</a><span class="typeInfo">  : Void</span><ul class="summary"><li>	Initialize the audio/video connection.</li></ul></li><li class="sortli listnum2"><a href="#destroy">destroy</a><span class="typeInfo">  : Void</span><ul class="summary"><li>	Destroy the AVCastManager instance.</li></ul></li><li class="sortli listnum3"><a href="#getAvailableCasts">getAvailableCasts</a><span class="typeInfo">  : Array</span><ul class="summary"><li>	Retrieve the list of available live broadcasts for the current room.</li></ul></li><li class="sortli listnum4"><a href="#stopPublishNotification">stopPublishNotification</a><span class="typeInfo">  : Void</span><ul class="summary"><li>	Stop receiving live cast published/unpublished events.</li></ul></li><li class="sortli listnum5"><a href="#subscribeLiveCast">subscribeLiveCast</a><span class="typeInfo"> (castId:String) : NetStream</span><ul class="summary"><li>	Subscribe a live cast to receive its audio/video stream.</li></ul></li><li class="sortli listnum6"><a href="#unsubscribeLiveCast">unsubscribeLiveCast</a><span class="typeInfo"> (castId:String) : Void</span><ul class="summary"><li>	Unsubscribe a live cast to stop receiving its audio/video stream.</li></ul></li><li class="sortli listnum7"><a href="#unsubscribeAllLiveCasts">unsubscribeAllLiveCasts</a><span class="typeInfo">  : Void</span><ul class="summary"><li>	Unsubscribe all currently subscribed live casts.</li></ul></li><li class="sortli listnum8"><a href="#publishLiveCast">publishLiveCast</a><span class="typeInfo"> (enableCamera:Boolean, enableMicrophone:Boolean) : NetStream</span><ul class="summary"><li>	Start broadcasting the current user's live stream.</li></ul></li><li class="sortli listnum9"><a href="#unpublishLiveCast">unpublishLiveCast</a><span class="typeInfo">  : Void</span><ul class="summary"><li>	Stop broadcasting the current user's live stream.</li></ul></li><li class="sortli listnum10"><a href="#addEventListener">addEventListener</a><span class="typeInfo"> (type:String, listener:Function) : Void</span><ul class="summary"><li>	Register a listener function in order to receive notification of a RedBox event.</li></ul></li><li class="sortli listnum11"><a href="#removeEventListener">removeEventListener</a><span class="typeInfo"> (type:String, listener:Function) : Void</span><ul class="summary"><li>	Remove a listener from the event dispatcher, to stop receiving notification of an event.</li></ul></li></ul></div></div></div><div class="memberSection"><h2 id="Constructor">Constructor</h2><div class="member" id="AVCastManager"><h3>AVCastManager</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>AVCastManager</b> (

</div><div class="code">red5Ip:String,
debug:Boolean)</div><br class="clear" /></div></div><div class="description"> 	AVCastManager contructor.<br />The RedBox classes make an extensive use of the SmartFoxBits Connector's s event handler in order to communicate with SmartFoxServer.<br />To achieve this you should place the Connector on a frame before you use RedBox classes on the following frame(s) or to make sure that the Connector is on the lowest layer of the timeline, and set the "Load order" option in the Flash Publish Settings to "Bottom up". </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">sfs   <span class="itemSeparator">:</span></div><div>the SmartFoxClient instance.</div></div><div class="item"><div class="floatbox code colorizedCode">red5Ip<span class="itemSeparator">:</span></div><div>the Red5 server IP address.</div></div><div class="item"><div class="floatbox code colorizedCode">debug <span class="itemSeparator">:</span></div><div>turn on the debug messages (optional, default is <code>false</code>).</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Throws:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_ConnectorNotFoundException.html">com.smartfoxserver.redbox.exceptions.ConnectorNotFoundException</a> if the SmartFoxBits Connector is not placed on the Stage. </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_MyUserPropsNotSetException.html">com.smartfoxserver.redbox.exceptions.MyUserPropsNotSetException</a> if the <i>SmartFoxClient.myUserId</i> or <i>SmartFoxClient.myUserName</i> properties are not set. </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_InvalidParamsException.html">com.smartfoxserver.redbox.exceptions.InvalidParamsException</a> if the <code>red5Ip</code> is not well formated IP address. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to instantiate the AVCastManager class.<br />			<pre>
<span class="codeKeyword">var</span> red5IpAddress:<span class="codeIdentifier">String</span> = <span class="codeString">"127.0.0.1"</span>

<span class="codeKeyword">var</span> avCastMan:AVCastManager = <span class="codeKeyword">new</span> AVCastManager(red5IpAddress)</pre><br />see		MyUserPropsNotSetException </li></ul></div></div></div></div></div></div><div class="memberSection"><h2 id="Instanceproperties">Instance properties</h2><div class="member" id="isConnected"><h3>isConnected</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code"><b>isConnected</b>:Boolean
</div><div class="floatbox"><span class="access">(read)</span></div><br class="clear" /></div></div><div class="description"> The status of the connection to the Red5 server.<br />If <code>true</code>, the connection to Red5 is currently available. </div></div></div><div class="memberSection"><h2 id="Instancemethods">Instance methods</h2><div class="member" id="addEventListener"><h3>addEventListener</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>addEventListener</b> (

</div><div class="code">type:String,
listener:Function) : Void</div><br class="clear" /></div></div><div class="description"> 	Register a listener function in order to receive notification of a RedBox event.<br /><br />If you no longer need an event listener, remove it by calling the removeEventListener method.<br /><br /><b>NOTE</b>: use the Delegate.create() method when registering a listener, to keep right scope in your application. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">type    <span class="itemSeparator">:</span></div><div>The event type you want to be notified of.</div></div><div class="item"><div class="floatbox code colorizedCode">listener<span class="itemSeparator">:</span></div><div>The listener function in your application that processes the event. This function must accept an RedBoxCastEvent object as its only parameter and must return nothing, as in the example above. </div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Usage:</span><div class="item"><ul><li> To register to an event:<br />		<pre>
<span class="codeKeyword">import</span> com.smartfoxserver.redbox.events.*
<span class="codeKeyword">import</span> mx.utils.Delegate

avCastMan.addEventListener(RedBoxCastEvent.onLiveCastPublished, Delegate.create(<span class="codeIdentifier">this</span>, myListener))

<span class="codeKeyword">private</span> <span class="codeKeyword">function</span> myListener(evt:RedBoxCastEvent):<span class="codeIdentifier">Void</span>
{
    <span class="codeIdentifier">trace</span>(<span class="codeString">"Got the event!"</span>)
    <span class="codeIdentifier">trace</span>(<span class="codeString">"Event type: "</span> + evt<span class="codeIdentifier">.type</span>)
    <span class="codeIdentifier">trace</span>(<span class="codeString">"Event target: "</span> + evt<span class="codeIdentifier">.target</span>)
    <span class="codeIdentifier">trace</span>(<span class="codeString">"Additional parameters:"</span>)

    <span class="codeKeyword">for</span> (<span class="codeKeyword">var</span> i <span class="codeKeyword">in</span> evt.params)
        <span class="codeIdentifier">trace</span>(<span class="codeString">"\t"</span> + i + <span class="codeString">" -&#62; "</span> + evt.params[i])
}</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVCastManager.html#removeEventListener">removeEventListener</a> </li><li> <a class="className" href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html">com.smartfoxserver.redbox.events.RedBoxCastEvent</a> </li></ul></div></div></div></div></div><div class="member" id="destroy"><h3>destroy</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>destroy</b> (
</div><div class="code">) : Void</div><br class="clear" /></div></div><div class="description"> 	Destroy the AVCastManager instance.<br />Calling this method causes the interruption of all the playing streams (if any) and the disconnection from Red5.<br />This method should always be called before deleting the AVCastManager instance. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to destroy the AVCastManager instance.<br />			<pre>
avCastMan.destroy()
avCastMan = <span class="codeIdentifier">null</span></pre> </li></ul></div></div></div></div></div><div class="member" id="getAvailableCasts"><h3>getAvailableCasts</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>getAvailableCasts</b> (
</div><div class="code">) : Array</div><br class="clear" /></div></div><div class="description"> 	Retrieve the list of available live broadcasts for the current room.<br />The list is populated by the <a class="className" href="com_smartfoxserver_redbox_AVCastManager.html">AVCastManager</a> class as soon as it is instantiated and each time a new room is joined.<br />When this method is called, the <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastPublished">com.smartfoxserver.redbox.events.RedBoxCastEvent.onLiveCastPublished</a> and <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastUnpublished">com.smartfoxserver.redbox.events.RedBoxCastEvent.onLiveCastUnpublished</a> events dispatching is enabled, in order to be notified when users in the current room start/stop streaming.<br />In order to turn off events notification, the <a href="com_smartfoxserver_redbox_AVCastManager.html#stopPublishNotification">stopPublishNotification</a> method should be called. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Returns:</span><div class="item"><ul><li> An array of <a class="className" href="com_smartfoxserver_redbox_data_LiveCast.html">com.smartfoxserver.redbox.data.LiveCast</a> objects. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to loop through the list of live casts available for the current room.<br />			<pre>
<span class="codeKeyword">var</span> liveCasts:<span class="codeIdentifier">Array</span> = avCastMan.getAvailableCasts()
   <span class="codeKeyword">for</span>(<span class="codeKeyword">var</span> i <span class="codeKeyword">in</span> avCastMan.getAvailableCasts())
   {
    <span class="codeKeyword">var</span> liveCast:LiveCast = liveCasts[i]
       <span class="codeComment">// Subscribe live cast</span>
       <span class="codeKeyword">var</span> stream:<span class="codeIdentifier">NetStream</span> = avCastMan.subscribeLiveCast(liveCast.id)

       <span class="codeComment">// Display a/v stream on stage</span>
       ...
   }</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_data_LiveCast.html">com.smartfoxserver.redbox.data.LiveCast</a> </li><li> <a href="com_smartfoxserver_redbox_AVCastManager.html#stopPublishNotification">stopPublishNotification</a> </li></ul></div></div></div></div></div><div class="member" id="initAVConnection"><h3>initAVConnection</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>initAVConnection</b> (
</div><div class="code">) : Void</div><br class="clear" /></div></div><div class="description"> 	Initialize the audio/video connection.<br />Calling this method causes the connection to Red5 to be established and the <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onAVConnectionInited">com.smartfoxserver.redbox.events.RedBoxCastEvent.onAVConnectionInited</a> event to be fired in response.<br />If the connection can't be established, the <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onAVConnectionError">com.smartfoxserver.redbox.events.RedBoxCastEvent.onAVConnectionError</a> event is fired in response.<br /><b>NOTE</b>: this method is called automatically when the AVCastManager is instantiated. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Throws:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_InvalidParamsException.html">com.smartfoxserver.redbox.exceptions.InvalidParamsException</a> if the <code>red5IpAddress</code> is not well formated IP address. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Events broadcasted to listeners:</span><div class="item"><ul><li><a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onAVConnectionInited">RedBoxCastEvent</a> with type: <code>onAVConnectionInited</code> <ul class="summary inheritDoc"><li>	Dispatched when the connection to Red5 server has been established.</li></ul></li><li><a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onAVConnectionError">RedBoxCastEvent</a> with type: <code>onAVConnectionError</code> <ul class="summary inheritDoc"><li>Dispatched when the connection to Red5 server can't be established.</li></ul></li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to initialize the Red5 connection for the AVCastManager instance.<br />			<pre>
avCastMan.initAVConnection()</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVCastManager.html#isConnected">isConnected</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onAVConnectionInited">com.smartfoxserver.redbox.events.RedBoxCastEvent.onAVConnectionInited</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onAVConnectionError">com.smartfoxserver.redbox.events.RedBoxCastEvent.onAVConnectionError</a> </li></ul></div></div></div></div></div><div class="member" id="publishLiveCast"><h3>publishLiveCast</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>publishLiveCast</b> (

</div><div class="code">enableCamera:Boolean,
enableMicrophone:Boolean) : NetStream</div><br class="clear" /></div></div><div class="description"> 	Start broadcasting the current user's live stream.<br />Calling this method causes the <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastPublished">com.smartfoxserver.redbox.events.RedBoxCastEvent.onLiveCastPublished</a> event to be fired on the other users clients.<br />Audio and video recording mode/quality should be set before calling this method. In order to alter these settings, please refer to the Microphone and Camera classes documentation. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">enableCamera    <span class="itemSeparator">:</span></div><div>enable video live streaming; default value is <code>true</code>.</div></div><div class="item"><div class="floatbox code colorizedCode">enableMicrophone<span class="itemSeparator">:</span></div><div>enable audio live streaming; default value is <code>true</code>.</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Returns:</span><div class="item"><ul><li> The NetStream object representing the user's outgoing stream. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Events broadcasted to listeners:</span><div class="item"><ul><li><a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastPublished">RedBoxCastEvent</a> with type: <code>onLiveCastPublished</code> <ul class="summary inheritDoc"><li>Dispatched when a user in the current room published his own live stream.</li></ul></li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Throws:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_NoAVConnectionException.html">com.smartfoxserver.redbox.exceptions.NoAVConnectionException</a> if the connection to Red5 is not available. </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_InvalidParamsException.html">com.smartfoxserver.redbox.exceptions.InvalidParamsException</a> if both <i>enableCamera</i> and <i>enableMicrophone</i> parameters are set to <code>false</code>. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to publish the current user's live stream.<br />			<pre>
avCastman.publishLiveCast(<span class="codeIdentifier">true</span>, <span class="codeIdentifier">true</span>)</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVCastManager.html#unpublishLiveCast">unpublishLiveCast</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastPublished">com.smartfoxserver.redbox.events.RedBoxCastEvent.onLiveCastPublished</a> </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_NoAVConnectionException.html">com.smartfoxserver.redbox.exceptions.NoAVConnectionException</a> </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_InvalidParamsException.html">com.smartfoxserver.redbox.exceptions.InvalidParamsException</a> </li><li> <span class="doesNotExist"> Camera</span> </li><li> <span class="doesNotExist"> Microphone</span> </li><li> <span class="doesNotExist"> NetStream</span> </li></ul></div></div></div></div></div><div class="member" id="removeEventListener"><h3>removeEventListener</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>removeEventListener</b> (

</div><div class="code">type:String,
listener:Function) : Void</div><br class="clear" /></div></div><div class="description"> 	Remove a listener from the event dispatcher, to stop receiving notification of an event.  </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">type    <span class="itemSeparator">:</span></div><div>The event type you registered your listener to.</div></div><div class="item"><div class="floatbox code colorizedCode">listener<span class="itemSeparator">:</span></div><div>The listener function to remove.</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Usage:</span><div class="item"><ul><li> To remove a listener:<br />		<pre>
avCastMan.removeEventListener(RedBoxCastEvent.onLiveCastPublished, myListener)</pre>		<b>NOTE</b>: the Delegate.create() is not required to remove a listener. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVCastManager.html#addEventListener">addEventListener</a> </li><li> <a class="className" href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html">com.smartfoxserver.redbox.events.RedBoxCastEvent</a> </li></ul></div></div></div></div></div><div class="member" id="stopPublishNotification"><h3>stopPublishNotification</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>stopPublishNotification</b> (
</div><div class="code">) : Void</div><br class="clear" /></div></div><div class="description"> 	Stop receiving live cast published/unpublished events. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVCastManager.html#getAvailableCasts">getAvailableCasts</a> </li></ul></div></div></div></div></div><div class="member" id="subscribeLiveCast"><h3>subscribeLiveCast</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>subscribeLiveCast</b> (
</div><div class="code">castId:String) : NetStream</div><br class="clear" /></div></div><div class="description"> 	Subscribe a live cast to receive its audio/video stream. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">castId<span class="itemSeparator">:</span></div><div>(<b>String</b>) the id of the <a class="className" href="com_smartfoxserver_redbox_data_LiveCast.html">com.smartfoxserver.redbox.data.LiveCast</a> object to be subscribed.</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Returns:</span><div class="item"><ul><li> A NetStream object. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Throws:</span><div class="item"><ul><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_NoAVConnectionException.html">com.smartfoxserver.redbox.exceptions.NoAVConnectionException</a> if the connection to Red5 is not available. </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to subscribe a live cast when a publishing notification is received.<br />			<pre>
avCastMan.addEventListener(RedBoxCastEvent.onLiveCastPublished, Delegate.create(<span class="codeIdentifier">this</span>, onLiveCastPublished))

<span class="codeComment">// A user publishes his own live cast...</span>

<span class="codeKeyword">function</span> onLiveCastPublished(evt:RedBoxCastEvent):<span class="codeIdentifier">Void</span>
{
    <span class="codeKeyword">var</span> liveCast:LiveCast = evt.params.liveCast

    <span class="codeComment">// Subscribe live cast</span>
    <span class="codeKeyword">var</span> stream:<span class="codeIdentifier">NetStream</span> = avCastMan.subscribeLiveCast(liveCast.id)

    <span class="codeComment">// Display a/v stream on stage</span>
    ...
}</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVCastManager.html#unsubscribeLiveCast">unsubscribeLiveCast</a> </li><li> <a class="className" href="com_smartfoxserver_redbox_exceptions_NoAVConnectionException.html">com.smartfoxserver.redbox.exceptions.NoAVConnectionException</a> </li><li> <span class="doesNotExist"> NetStream</span> </li></ul></div></div></div></div></div><div class="member" id="unpublishLiveCast"><h3>unpublishLiveCast</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>unpublishLiveCast</b> (
</div><div class="code">) : Void</div><br class="clear" /></div></div><div class="description"> 	Stop broadcasting the current user's live stream.<br />Calling this method causes the <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastUnpublished">com.smartfoxserver.redbox.events.RedBoxCastEvent.onLiveCastUnpublished</a> event to be fired on the other users clients. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Events broadcasted to listeners:</span><div class="item"><ul><li><a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastUnpublished">RedBoxCastEvent</a> with type: <code>onLiveCastUnpublished</code> <ul class="summary inheritDoc"><li>Dispatched when a user in the current room stops his own live stream.</li></ul></li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to unpublish a live cast.<br />			<pre>
avCastMan.unpublishLiveCast()</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVCastManager.html#publishLiveCast">publishLiveCast</a> </li><li> <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastUnpublished">com.smartfoxserver.redbox.events.RedBoxCastEvent.onLiveCastUnpublished</a> </li></ul></div></div></div></div></div><div class="member" id="unsubscribeAllLiveCasts"><h3>unsubscribeAllLiveCasts</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>unsubscribeAllLiveCasts</b> (
</div><div class="code">) : Void</div><br class="clear" /></div></div><div class="description"> 	Unsubscribe all currently subscribed live casts. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVCastManager.html#unsubscribeLiveCast">unsubscribeLiveCast</a> </li></ul></div></div></div></div></div><div class="member" id="unsubscribeLiveCast"><h3>unsubscribeLiveCast</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>unsubscribeLiveCast</b> (
</div><div class="code">castId:String) : Void</div><br class="clear" /></div></div><div class="description"> 	Unsubscribe a live cast to stop receiving its audio/video stream.<br /><b>NOTE</b>: when a user stops his own stream or leaves the current room / disconnects from SmartFoxServer while his stream is in progress, the <a class="className" href="com_smartfoxserver_redbox_AVCastManager.html">AVCastManager</a> class automatically unsubscribes the live cast before dispatching the <a href="com_smartfoxserver_redbox_events_RedBoxCastEvent.html#onLiveCastUnpublished">com.smartfoxserver.redbox.events.RedBoxCastEvent.onLiveCastUnpublished</a> event. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">castId<span class="itemSeparator">:</span></div><div>(<b>String</b>) the id of the <a class="className" href="com_smartfoxserver_redbox_data_LiveCast.html">com.smartfoxserver.redbox.data.LiveCast</a> object to be unsubscribed.</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Example:</span><div class="item"><ul><li> The following example shows how to unsubscribe a live cast.<br />			<pre>
avCastMan.unsubscribeLiveCast(liveCast.id)</pre> </li></ul></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">See also:</span><div class="item"><ul><li> <a href="com_smartfoxserver_redbox_AVCastManager.html#subscribeLiveCast">subscribeLiveCast</a> </li></ul></div></div></div></div></div></div><div class="footer"><ul class="docFooter"><li class="copyright">&copy; gotoAndPlay() - 2008</li></ul></div></div></div></body></html>